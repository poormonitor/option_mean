# 50ETF期权波动率均值回归策略

#### 浙江大学期货市场理论与实务课程作业

本项目实现了一个基于50ETF期权隐含波动率（IV）均值回归特性的投资策略。通过构建多种波动率因子，结合滚动分位数（Rolling Rank）判断市场情绪，在波动率极值点进行做空或做多波动率交易，并保持Delta中性。

## 策略逻辑

### 1. 因子构建
策略使用以下四个核心因子，并计算其在滚动窗口（如20日）内的百分位排名（Rank）：
- **IV_ATM (平值隐含波动率)**: 衡量市场整体恐慌程度。
- **Term Structure (期限结构)**: 近月与远月IV的比值。
- **Skew (偏度)**: 虚值Call与Put的IV比值，反映尾部风险定价。
- **PCR (成交量比率)**: Put与Call的成交量之比。

### 2. 交易信号
- **做空波动率**: 当 IV Rank 处于高位，且多个辅助因子确认时，卖出跨式/宽跨式组合。
- **做多波动率**: 当 IV Rank 处于低位，且多个辅助因子确认时，买入跨式/宽跨式组合。

### 3. 仓位管理
- **Delta中性**: 根据Call和Put的Delta比率配比手数，初始Delta约为0。
- **风控**: 包含止盈止损机制，以及临近到期日（<15天）强制平仓逻辑。

## 运行方法

安装依赖：
```bash
uv sync
```

运行程序:
```bash
python main.py
```

程序将自动执行以下步骤：
1. 读取并清洗数据。
2. 计算波动率因子。
3. 将数据划分为训练集和测试集。
4. 在训练集上使用多进程并行搜索最优参数组合（夏普比率最大化）。
5. 使用最优参数在测试集上进行回测并输出结果图表。

## LICENSE

本程序是自由软件：你可以再分发之和/或依照由自由软件基金会发布的 GNU 通用公共许可证修改之，无论是版本 3 许可证，还是（按你的决定）任何以后版都可以。

发布该程序是希望它能有用，但是并无保障；甚至连可销售和符合某个特定的目的都不保证。请参看 GNU 通用公共许可证。

你应该随程序获得一份 GNU 通用公共许可证的副本。如果没有，请看 [GPLv3](https://www.gnu.org/licenses/gpl-3.0.txt)。
